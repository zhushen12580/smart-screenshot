<!-- Generated by SpecStory -->

# å¤šè¯­è¨€ç¿»è¯‘é…ç½®è®¨è®º (2025-04-09 16:44Z)

_**User**_

è¿™ä¸ªAIå¯¹è¯ç•Œé¢çš„æ–‡æœ¬ä¸æ’ä»¶ç•Œé¢çš„æ–‡æœ¬ä¸€æ ·ï¼Œå¸®æˆ‘éƒ½è®¾ç½®å¥½å¤šè¯­è¨€ç¿»è¯‘ã€‚æ³¨æ„åœ¨ä¸æ”¹å˜æ ¸å¿ƒåŠŸèƒ½å’Œé£æ ¼æ ·å¼çš„å‰æä¸‹è¿›è¡Œã€‚

---

_**Assistant**_

<think><details><summary>Thought Process</summary>è¿™ä¸ªè¯·æ±‚æ˜¯è¦ä¸ºAIå¯¹è¯ç•Œé¢æ·»åŠ å¤šè¯­è¨€ç¿»è¯‘åŠŸèƒ½ã€‚ä»é™„ä»¶ä¸­ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªHTMLæ–‡ä»¶(`dialog.html`)å’Œä¸€ä¸ªJavaScriptæ–‡ä»¶(`dialog.js`)ï¼Œè¿™äº›æ–‡ä»¶æ„æˆäº†ä¸€ä¸ªAIå¯¹è¯ç•Œé¢ã€‚

å…·ä½“éœ€æ±‚æ˜¯è¦åœ¨ä¸æ”¹å˜æ ¸å¿ƒåŠŸèƒ½å’Œé£æ ¼æ ·å¼çš„å‰æä¸‹ï¼Œæ·»åŠ å¤šè¯­è¨€ç¿»è¯‘æ”¯æŒã€‚æˆ‘éœ€è¦ï¼š

1. åˆ›å»ºä¸€ä¸ªç¿»è¯‘ç³»ç»Ÿ
2. æå–æ‰€æœ‰ç•Œé¢æ–‡æœ¬
3. æ·»åŠ è¯­è¨€åˆ‡æ¢åŠŸèƒ½
4. ç¡®ä¿æ ¸å¿ƒåŠŸèƒ½ä¸å—å½±å“

æˆ‘ä»¬éœ€è¦ï¼š
1. åˆ›å»ºä¸€ä¸ªç¿»è¯‘æ–‡ä»¶ï¼ŒåŒ…å«æ‰€æœ‰ç•Œé¢æ–‡æœ¬çš„å¤šè¯­è¨€ç‰ˆæœ¬
2. ä¿®æ”¹HTMLä»¥æ·»åŠ è¯­è¨€é€‰æ‹©å™¨
3. ä¿®æ”¹JavaScriptä»¥æ”¯æŒåŠ¨æ€åˆ‡æ¢è¯­è¨€

è®©æˆ‘è®¾è®¡è¿™ä¸ªè§£å†³æ–¹æ¡ˆï¼š</details></think>

---

æˆ‘å°†ä¸ºè¿™ä¸ªAIå¯¹è¯ç•Œé¢æ·»åŠ å¤šè¯­è¨€ç¿»è¯‘åŠŸèƒ½ã€‚è®©æˆ‘ä»¬ä¸€æ­¥æ­¥å®ç°ï¼š

---

<details>
            <summary>Listed directory ai_dialog â€¢ **4** results</summary>
        
| Name |
|-------|
| ğŸ“„ `dialog.css` |
| ğŸ“„ `dialog.js` |
| ğŸ“„ `dialog.html` |
| ğŸ“ `lib` |

</details>

---

ç°åœ¨ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªæ–°çš„è¯­è¨€æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹ HTML å’Œ JS æ–‡ä»¶æ¥æ”¯æŒå¤šè¯­è¨€ï¼š

1. é¦–å…ˆï¼Œè®©æˆ‘åˆ›å»ºä¸€ä¸ªè¯­è¨€é…ç½®æ–‡ä»¶:

---

```diff
- 
+ // å¤šè¯­è¨€ç¿»è¯‘é…ç½®
+ const translations = {
+     'zh-CN': {
+         // æ ‡é¢˜ä¸å¤´éƒ¨
+         'title': 'ç²¾å‡†æˆªå›¾',
+         'dialog_header': 'ä¸æˆªå›¾æ™ºèƒ½å¯¹è¯',
+         'enhanced_mode': 'å¯¹è¯å¢å¼º',
+         
+         // æŒ‰é’®ä¸æ§ä»¶
+         'close': 'å…³é—­',
+         'send': 'å‘é€',
+         'input_placeholder': 'è¾“å…¥ä½ çš„é—®é¢˜...',
+         'image_size': '0 KB',
+         
+         // æ¨¡æ¿æç¤º
+         'quick_prompts': 'å¿«æ·æç¤º',
+         'extract_text_title': 'æå–æ–‡æœ¬',
+         'extract_text_desc': 'è¯†åˆ«å¹¶æå–å›¾ç‰‡ä¸­çš„æ‰€æœ‰æ–‡å­—',
+         'extract_text_prompt': 'æå–è¿™å¼ å›¾ç‰‡ä¸­çš„æ‰€æœ‰æ–‡æœ¬å†…å®¹ã€‚',
+         
+         'explain_image_title': 'è§£é‡Šå›¾ç‰‡',
+         'explain_image_desc': 'ç®€å•æ˜äº†åœ°è§£é‡Šå›¾ç‰‡å†…å®¹',
+         'explain_image_prompt': 'è¯·é€šä¿—æ˜“æ‡‚åœ°è§£é‡Šè¿™å¼ å›¾ç‰‡è¡¨è¾¾çš„æ„æ€ã€‚',
+         
+         'analyze_content_title': 'å†…å®¹åˆ†æ',
+         'analyze_content_desc': 'åˆ†æå›¾ç‰‡ä¸­çš„ä¸»è¦å†…å®¹å’Œè¦ç‚¹',
+         'analyze_content_prompt': 'è¯·åˆ†æè¿™å¼ å›¾ç‰‡ä¸­çš„ä¸»è¦å†…å®¹å’Œå…³é”®ä¿¡æ¯ã€‚',
+         
+         'check_issues_title': 'é—®é¢˜æ£€æŸ¥',
+         'check_issues_desc': 'æŸ¥æ‰¾å›¾ç‰‡ä¸­å¯èƒ½å­˜åœ¨çš„é”™è¯¯',
+         'check_issues_prompt': 'è¯·æ£€æŸ¥è¿™ä¸ªå›¾ç‰‡ä¸­æ˜¯å¦æœ‰é”™è¯¯æˆ–é—®é¢˜ï¼Œå¦‚æœæœ‰è¯·æŒ‡å‡ºã€‚',
+         
+         'extract_table_title': 'è¡¨æ ¼æå–',
+         'extract_table_desc': 'å°†è¡¨æ ¼æ•°æ®è½¬ä¸ºæ–‡æœ¬æ ¼å¼',
+         'extract_table_prompt': 'è¯·å°†å›¾ç‰‡ä¸­çš„è¡¨æ ¼æ•°æ®è½¬æ¢ä¸ºæ˜“è¯»çš„æ–‡æœ¬æ ¼å¼ã€‚',
+         
+         'analyze_chart_title': 'å›¾è¡¨è§£æ',
+         'analyze_chart_desc': 'è§£è¯»å›¾è¡¨ä¸­çš„æ•°æ®å’Œè¶‹åŠ¿',
+         'analyze_chart_prompt': 'è¯·åˆ†æè¿™å¼ å›¾è¡¨å¹¶è§£é‡Šå…¶ä¸­çš„è¶‹åŠ¿å’Œå«ä¹‰ã€‚',
+         
+         // çŠ¶æ€ä¸æ¶ˆæ¯
+         'thinking': 'æ­£åœ¨æ€è€ƒ...',
+         'welcome_message': 'ä½ å¥½ï¼æˆ‘å·²ç»çœ‹åˆ°äº†è¿™å¼ å›¾ç‰‡ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„ï¼Ÿ',
+         'enhanced_mode_on': 'å·²åˆ‡æ¢åˆ°å¯¹è¯å¢å¼ºæ¨¡å¼ã€‚è¯¥æ¨¡å¼ç»“åˆå›¾åƒè¯†åˆ«å’Œé«˜çº§å¯¹è¯èƒ½åŠ›ï¼Œæä¾›æ›´è¿è´¯çš„äº¤æµä½“éªŒã€‚',
+         'standard_mode_on': 'å·²åˆ‡æ¢åˆ°æ ‡å‡†æ¨¡å¼ã€‚',
+         'image_compressed': 'å·²å‹ç¼©',
+         'image_size_warning': 'å›¾åƒå¤§å°è¶…è¿‡5MBï¼Œå¯èƒ½æ— æ³•æ­£å¸¸å¤„ç†ã€‚è¯·è€ƒè™‘ä½¿ç”¨æ›´å°çš„å›¾åƒã€‚',
+         'request_failed': 'è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•',
+         'enhanced_mode_failed': 'å¢å¼ºå¯¹è¯è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•æˆ–åˆ‡æ¢åˆ°æ ‡å‡†æ¨¡å¼',
+         'image_desc_failed': 'æ— æ³•è·å–å›¾åƒæè¿°ï¼Œè¯·é‡è¯•æˆ–åˆ‡æ¢åˆ°æ ‡å‡†æ¨¡å¼',
+         'streaming_error': 'æ¥æ”¶å“åº”æ—¶å‡ºé”™',
+         'empty_response': 'æ”¶åˆ°å›å¤ä½†æ— å†…å®¹',
+         
+         // é¡µè„š
+         'footer_text': 'å›¾åƒæ™ºèƒ½åˆ†æ Â· è¯·å‹¿ä¸Šä¼ æ•æ„Ÿä¿¡æ¯'
+     },
+     'en-US': {
+         // Title and header
+         'title': 'Smart Screenshot',
+         'dialog_header': 'Chat with Screenshot',
+         'enhanced_mode': 'Enhanced Chat',
+         
+         // Buttons and controls
+         'close': 'Close',
+         'send': 'Send',
+         'input_placeholder': 'Enter your question...',
+         'image_size': '0 KB',
+         
+         // Template prompts
+         'quick_prompts': 'Quick Prompts',
+         'extract_text_title': 'Extract Text',
+         'extract_text_desc': 'Identify and extract all text from the image',
+         'extract_text_prompt': 'Extract all text content from this image.',
+         
+         'explain_image_title': 'Explain Image',
+         'explain_image_desc': 'Explain the image content clearly',
+         'explain_image_prompt': 'Please explain what this image means in simple terms.',
+         
+         'analyze_content_title': 'Content Analysis',
+         'analyze_content_desc': 'Analyze main content and key points',
+         'analyze_content_prompt': 'Please analyze the main content and key information in this image.',
+         
+         'check_issues_title': 'Check Issues',
+         'check_issues_desc': 'Find possible errors in the image',
+         'check_issues_prompt': 'Please check if there are any errors or issues in this image and point them out if any.',
+         
+         'extract_table_title': 'Extract Table',
+         'extract_table_desc': 'Convert table data to text format',
+         'extract_table_prompt': 'Please convert the table data in this image to readable text format.',
+         
+         'analyze_chart_title': 'Chart Analysis',
+         'analyze_chart_desc': 'Interpret data and trends in the chart',
+         'analyze_chart_prompt': 'Please analyze this chart and explain its trends and meanings.',
+         
+         // Status and messages
+         'thinking': 'Thinking...',
+         'welcome_message': 'Hello! I can see this image. How can I help you?',
+         'enhanced_mode_on': 'Switched to enhanced chat mode. This mode combines image recognition and advanced dialogue capabilities for a more coherent experience.',
+         'standard_mode_on': 'Switched to standard mode.',
+         'image_compressed': 'compressed',
+         'image_size_warning': 'Image size exceeds 5MB, which may not process properly. Please consider using a smaller image.',
+         'request_failed': 'Request failed, please try again later',
+         'enhanced_mode_failed': 'Enhanced chat request failed, please try again later or switch to standard mode',
+         'image_desc_failed': 'Unable to get image description, please try again or switch to standard mode',
+         'streaming_error': 'Error receiving response',
+         'empty_response': 'Received reply but no content',
+         
+         // Footer
+         'footer_text': 'Image Intelligent Analysis Â· Do not upload sensitive information'
+     }
+ };
+ 
+ // é»˜è®¤è¯­è¨€
+ let currentLanguage = 'zh-CN';
+ 
+ // è·å–å½“å‰è¯­è¨€çš„ç¿»è¯‘æ–‡æœ¬
+ function getTranslation(key) {
+     if (!translations[currentLanguage] || !translations[currentLanguage][key]) {
+         // å¦‚æœæ‰¾ä¸åˆ°ç¿»è¯‘ï¼Œè¿”å›ä¸­æ–‡é»˜è®¤å€¼
+         return translations['zh-CN'][key] || key;
+     }
+     return translations[currentLanguage][key];
+ }
+ 
+ // è®¾ç½®ç•Œé¢è¯­è¨€
+ function setLanguage(lang) {
+     if (translations[lang]) {
+         currentLanguage = lang;
+         updateUILanguage();
+     }
+ }
+ 
+ // æ›´æ–°ç•Œé¢è¯­è¨€
+ function updateUILanguage() {
+     // æ›´æ–°é¡µé¢æ ‡é¢˜
+     document.title = getTranslation('title');
+     
+     // æ›´æ–°å¤´éƒ¨æ ‡é¢˜
+     const headerTitle = document.querySelector('.ai-dialog-header h3');
+     if (headerTitle) {
+         headerTitle.innerHTML = `<span class="material-icons">auto_awesome</span>${getTranslation('dialog_header')}`;
+     }
+     
+     // æ›´æ–°å¢å¼ºæ¨¡å¼æ ‡ç­¾
+     const enhancedLabel = document.querySelector('.toggle-label');
+     if (enhancedLabel) {
+         enhancedLabel.textContent = getTranslation('enhanced_mode');
+     }
+     
+     // æ›´æ–°å…³é—­æŒ‰é’®
+     const closeButton = document.querySelector('.close-button .material-icons');
+     if (closeButton) {
+         closeButton.setAttribute('title', getTranslation('close'));
+     }
+     
+     // æ›´æ–°è¾“å…¥æ¡†å ä½ç¬¦
+     const inputField = document.getElementById('user-input');
+     if (inputField) {
+         inputField.setAttribute('placeholder', getTranslation('input_placeholder'));
+     }
+     
+     // æ›´æ–°å‘é€æŒ‰é’®
+     const sendButton = document.getElementById('send-button');
+     if (sendButton) {
+         sendButton.setAttribute('title', getTranslation('send'));
+     }
+     
+     // æ›´æ–°å¿«æ·æç¤ºæŒ‰é’®
+     const templatesButton = document.getElementById('show-templates');
+     if (templatesButton) {
+         templatesButton.textContent = getTranslation('quick_prompts');
+     }
+     
+     // æ›´æ–°æ¨¡æ¿é¡¹
+     updateTemplateItems();
+     
+     // æ›´æ–°é¡µè„š
+     const footer = document.querySelector('.dialog-footer p');
+     if (footer) {
+         footer.textContent = getTranslation('footer_text');
+     }
+ }
+ 
+ // æ›´æ–°æ¨¡æ¿é¡¹æ–‡æœ¬
+ function updateTemplateItems() {
+     // æå–æ–‡æœ¬æ¨¡æ¿
+     updateTemplateItem(0, 'extract_text_title', 'extract_text_desc', 'extract_text_prompt');
+     
+     // è§£é‡Šå›¾ç‰‡æ¨¡æ¿
+     updateTemplateItem(1, 'explain_image_title', 'explain_image_desc', 'explain_image_prompt');
+     
+     // å†…å®¹åˆ†ææ¨¡æ¿
+     updateTemplateItem(2, 'analyze_content_title', 'analyze_content_desc', 'analyze_content_prompt');
+     
+     // é—®é¢˜æ£€æŸ¥æ¨¡æ¿
+     updateTemplateItem(3, 'check_issues_title', 'check_issues_desc', 'check_issues_prompt');
+     
+     // è¡¨æ ¼æå–æ¨¡æ¿
+     updateTemplateItem(4, 'extract_table_title', 'extract_table_desc', 'extract_table_prompt');
+     
+     // å›¾è¡¨è§£ææ¨¡æ¿
+     updateTemplateItem(5, 'analyze_chart_title', 'analyze_chart_desc', 'analyze_chart_prompt');
+ }
+ 
+ // æ›´æ–°å•ä¸ªæ¨¡æ¿é¡¹
+ function updateTemplateItem(index, titleKey, descKey, promptKey) {
+     const templateItems = document.querySelectorAll('.template-item');
+     if (templateItems.length > index) {
+         const item = templateItems[index];
+         const titleElement = item.querySelector('.template-title');
+         const descElement = item.querySelector('.template-desc');
+         
+         if (titleElement) {
+             titleElement.textContent = getTranslation(titleKey);
+         }
+         if (descElement) {
+             descElement.textContent = getTranslation(descKey);
+         }
+         
+         // æ›´æ–°æç¤ºæ–‡æœ¬
+         item.setAttribute('data-template', getTranslation(promptKey));
+     }
+ }
+ 
+ // è·å–æµè§ˆå™¨è¯­è¨€
+ function getBrowserLanguage() {
+     const language = navigator.language || navigator.userLanguage;
+     if (language.startsWith('zh')) {
+         return 'zh-CN';
+     } else {
+         return 'en-US'; // é»˜è®¤ä½¿ç”¨è‹±æ–‡
+     }
+ }
+ 
+ // å¯¼å‡ºå‡½æ•°å’Œå˜é‡
+ window.Translations = {
+     getTranslation,
+     setLanguage,
+     updateUILanguage,
+     getBrowserLanguage,
+     getCurrentLanguage: () => currentLanguage
+ }; 
```

---

2. ç°åœ¨ä¿®æ”¹ HTML æ–‡ä»¶ï¼Œæ·»åŠ è¯­è¨€åˆ‡æ¢åŠŸèƒ½ï¼š

---

```diff
      <!-- ä½¿ç”¨æœ¬åœ°Markdownå’ŒDOMPurifyåº“ -->
      <script src="lib/simple-markdown.js"></script>
- 
+     <!-- æ·»åŠ å¤šè¯­è¨€ç¿»è¯‘æ”¯æŒ -->
+     <script src="translations.js"></script>
  </head>
  <body>
```

```diff
                      </label>
                  </div>
+                 <!-- æ·»åŠ è¯­è¨€é€‰æ‹©å™¨ -->
+                 <div class="language-selector">
+                     <select id="language-selector">
+                         <option value="zh-CN">ä¸­æ–‡</option>
+                         <option value="en-US">English</option>
+                     </select>
+                 </div>
                  <button id="close-dialog" class="close-button"><span class="material-icons">close</span></button>
              </div>
```

---

3. ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ›´æ–° CSS æ–‡ä»¶ä»¥æ·»åŠ è¯­è¨€é€‰æ‹©å™¨çš„æ ·å¼ï¼š

---

Read file: ai_dialog/dialog.css

---

```diff
      display: flex;
      align-items: center;
-     gap: 10px;
+     gap: 15px;
  }
  
```

```diff
      50% { opacity: 0; }
  }
+ 
+ /* æ·»åŠ è¯­è¨€é€‰æ‹©å™¨æ ·å¼ */
+ .language-selector {
+     display: flex;
+     align-items: center;
+ }
+ 
+ .language-selector select {
+     background-color: #f5f5f5;
+     border: 1px solid #e0e0e0;
+     border-radius: 6px;
+     padding: 6px 10px;
+     font-size: 13px;
+     color: #555;
+     cursor: pointer;
+     transition: all 0.2s ease;
+     appearance: none;
+     -webkit-appearance: none;
+     background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='6'%3E%3Cpath fill='%23555' d='M0 0l6 6 6-6z'/%3E%3C/svg%3E");
+     background-repeat: no-repeat;
+     background-position: right 8px center;
+     padding-right: 24px;
+ }
+ 
+ .language-selector select:hover {
+     background-color: #e9e9e9;
+     border-color: #d0d0d0;
+ }
+ 
+ .language-selector select:focus {
+     outline: none;
+     border-color: #2979ff;
+     box-shadow: 0 0 0 2px rgba(41, 121, 255, 0.2);
+ }
+ 
+ /* æš—è‰²æ¨¡å¼æ ·å¼ */
+ @media (prefers-color-scheme: dark) {
+     .language-selector select {
+         background-color: #333;
+         border-color: #444;
+         color: #eee;
+         background-image: url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='6'%3E%3Cpath fill='%23eee' d='M0 0l6 6 6-6z'/%3E%3C/svg%3E");
+     }
+     
+     .language-selector select:hover {
+         background-color: #444;
+         border-color: #555;
+     }
+     
+     .language-selector select:focus {
+         border-color: #2979ff;
+         box-shadow: 0 0 0 2px rgba(41, 121, 255, 0.4);
+     }
+ }
```

---

4. æœ€åï¼Œæ›´æ–° JavaScript æ–‡ä»¶ä»¥å®ç°è¯­è¨€åˆ‡æ¢åŠŸèƒ½:

---

```diff
      const templateItems = document.querySelectorAll('.template-item');
      const enhancedModeToggle = document.getElementById('enhanced-mode-toggle');
+     const languageSelector = document.getElementById('language-selector'); // æ–°å¢ï¼šè¯­è¨€é€‰æ‹©å™¨
      
      // å­˜å‚¨å›¾åƒçš„base64æ•°æ®
```

```diff
              // æ·»åŠ æ¬¢è¿æ¶ˆæ¯
              setTimeout(() => {
-                 addMessage("ä½ å¥½ï¼æˆ‘å·²ç»çœ‹åˆ°äº†è¿™å¼ å›¾ç‰‡ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„ï¼Ÿ", 'ai');
+                 addMessage(window.Translations.getTranslation('welcome_message'), 'ai');
              }, 500);
          }
```

```diff
              // å½“åˆ‡æ¢åˆ°å¢å¼ºæ¨¡å¼æ—¶ï¼Œæ˜¾ç¤ºæç¤ºæ¶ˆæ¯
              if (isEnhancedMode) {
-                 addMessage("å·²åˆ‡æ¢åˆ°å¯¹è¯å¢å¼ºæ¨¡å¼ã€‚è¯¥æ¨¡å¼ç»“åˆå›¾åƒè¯†åˆ«å’Œé«˜çº§å¯¹è¯èƒ½åŠ›ï¼Œæä¾›æ›´è¿è´¯çš„äº¤æµä½“éªŒã€‚", 'ai');
+                 addMessage(window.Translations.getTranslation('enhanced_mode_on'), 'ai');
                  
                  // å¦‚æœå·²ç»æœ‰å›¾ç‰‡ä½†è¿˜æ²¡æœ‰æè¿°ï¼Œåˆ™è·å–å›¾ç‰‡æè¿°
```

```diff
                  }
              } else {
-                 addMessage("å·²åˆ‡æ¢åˆ°æ ‡å‡†æ¨¡å¼ã€‚", 'ai');
+                 addMessage(window.Translations.getTranslation('standard_mode_on'), 'ai');
                  // åœ¨æ ‡å‡†æ¨¡å¼ä¸‹é‡ç½®èŠå¤©å†å²
                  chatHistory = [];
              }
          });
+         
+         // è¯­è¨€é€‰æ‹©å™¨å˜æ›´äº‹ä»¶
+         languageSelector.addEventListener('change', function() {
+             window.Translations.setLanguage(this.value);
+         });
+         
+         // åˆå§‹åŒ–è¯­è¨€è®¾ç½®
+         initializeLanguage();
          
          // æ¨¡æ¿ä¸‹æ‹‰èœå•çš„äº‹ä»¶ç›‘å¬
```

```diff
          });
      }
+     
+     // åˆå§‹åŒ–è¯­è¨€è®¾ç½®
+     function initializeLanguage() {
+         // è®¾ç½®é»˜è®¤è¯­è¨€ä¸ºæµè§ˆå™¨è¯­è¨€
+         const browserLang = window.Translations.getBrowserLanguage();
+         languageSelector.value = browserLang;
+         window.Translations.setLanguage(browserLang);
+         
+         // æ›´æ–°æ•´ä¸ªç•Œé¢çš„è¯­è¨€
+         window.Translations.updateUILanguage();
+     }
      
      // è·å–åˆå§‹å›¾åƒæè¿°ï¼ˆç”¨äºå¢å¼ºæ¨¡å¼ï¼‰
```

```diff
              } else {
                  // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
-                 const errorMsg = response?.error || 'æ— æ³•è·å–å›¾åƒæè¿°ï¼Œå¢å¼ºæ¨¡å¼å¯èƒ½å—é™';
+                 const errorMsg = response?.error || window.Translations.getTranslation('image_desc_failed');
                  showWarning(errorMsg);
              }
```

```diff
          // æ£€æŸ¥å›¾åƒå¤§å°æ˜¯å¦è¶…è¿‡5MB
          if (imageSize > 5 * 1024 * 1024) {
-             showWarning('å›¾åƒå¤§å°è¶…è¿‡5MBï¼Œå¯èƒ½æ— æ³•æ­£å¸¸å¤„ç†ã€‚è¯·è€ƒè™‘ä½¿ç”¨æ›´å°çš„å›¾åƒã€‚');
+             showWarning(window.Translations.getTranslation('image_size_warning'));
              
              // è‡ªåŠ¨å‹ç¼©å›¾åƒ
```

```diff
                  
                  const newSize = calculateImageSize(resizedBase64);
-                 imageSizeElement.textContent = formatFileSize(newSize) + ' (å·²å‹ç¼©)';
+                 imageSizeElement.textContent = formatFileSize(newSize) + ' (' + window.Translations.getTranslation('image_compressed') + ')';
                  
                  // å¦‚æœåœ¨å¢å¼ºæ¨¡å¼ä¸‹ï¼Œè·å–å›¾åƒæè¿°
```

```diff
                  hideLoadingIndicator();
                  
-                 const errorMsg = response?.error || 'æ— æ³•è·å–å›¾åƒæè¿°ï¼Œè¯·é‡è¯•æˆ–åˆ‡æ¢åˆ°æ ‡å‡†æ¨¡å¼';
+                 const errorMsg = response?.error || window.Translations.getTranslation('image_desc_failed');
                  showWarning(errorMsg);
              }
```

```diff
          
          // æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯
-         showWarning(error || "æ¥æ”¶å“åº”æ—¶å‡ºé”™");
+         showWarning(error || window.Translations.getTranslation('streaming_error'));
          
          // æ¸…ç†ä»»ä½•æ­£åœ¨è¿›è¡Œçš„æ¶ˆæ¯
```

```diff
                  if (!response.success) {
                      // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
-                     const errorMsg = response.error || 'å¢å¼ºå¯¹è¯è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•æˆ–åˆ‡æ¢åˆ°æ ‡å‡†æ¨¡å¼';
+                     const errorMsg = response.error || window.Translations.getTranslation('enhanced_mode_failed');
                      showWarning(errorMsg);
                  } else {
                      // å¤„ç†éæµå¼å“åº”ï¼ˆè™½ç„¶æˆ‘ä»¬æœŸæœ›æµå¼å“åº”ï¼‰
-                     addMessage(response.aiResponse || "æ”¶åˆ°å›å¤ä½†æ— å†…å®¹", 'ai');
+                     addMessage(response.aiResponse || window.Translations.getTranslation('empty_response'), 'ai');
                      chatHistory.push({role: 'assistant', content: response.aiResponse || ""});
                  }
```

```diff
          
          const text = document.createElement('span');
-         text.textContent = 'æ­£åœ¨æ€è€ƒ...';
+         text.textContent = window.Translations.getTranslation('thinking');
          
          loadingElement.appendChild(spinner);
```

```diff
              } else {
                  // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
-                 const errorMsg = response?.error || 'è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
+                 const errorMsg = response?.error || window.Translations.getTranslation('request_failed');
                  showWarning(errorMsg);
              }
```

---

ç°åœ¨æˆ‘ä»¬å·²ç»å®Œæˆäº†å¤šè¯­è¨€ç¿»è¯‘åŠŸèƒ½çš„æ·»åŠ ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬æ‰€åšçš„å·¥ä½œæ€»ç»“:

1. åˆ›å»ºäº† `translations.js` æ–‡ä»¶ï¼ŒåŒ…å«ä¸­æ–‡å’Œè‹±æ–‡çš„æ‰€æœ‰ç•Œé¢æ–‡æœ¬
2. ä¿®æ”¹äº† `dialog.html` æ–‡ä»¶ï¼Œæ·»åŠ äº†è¯­è¨€é€‰æ‹©å™¨å’Œç¿»è¯‘æ–‡ä»¶å¼•ç”¨
3. æ›´æ–°äº† `dialog.css` æ–‡ä»¶ï¼Œä¸ºè¯­è¨€é€‰æ‹©å™¨æ·»åŠ äº†æ ·å¼
4. ä¿®æ”¹äº† `dialog.js` æ–‡ä»¶ï¼Œå®ç°äº†è¯­è¨€åˆ‡æ¢å’Œè‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€çš„åŠŸèƒ½

ç³»ç»Ÿç°åœ¨å¯ä»¥æ”¯æŒè‹±æ–‡å’Œä¸­æ–‡ç•Œé¢ï¼Œå¹¶ä¸”èƒ½æ ¹æ®æµè§ˆå™¨è¯­è¨€è‡ªåŠ¨åˆ‡æ¢ã€‚ç”¨æˆ·ä¹Ÿå¯ä»¥æ‰‹åŠ¨åœ¨ç•Œé¢é¡¶éƒ¨çš„è¯­è¨€é€‰æ‹©å™¨ä¸­åˆ‡æ¢è¯­è¨€ã€‚æ‰€æœ‰çš„ç•Œé¢æ–‡æœ¬ã€æç¤ºæ¨¡æ¿å’ŒçŠ¶æ€æ¶ˆæ¯éƒ½ä¼šæ ¹æ®æ‰€é€‰è¯­è¨€è¿›è¡Œæ˜¾ç¤ºã€‚

åŠŸèƒ½ç‰¹ç‚¹:
1. è‡ªåŠ¨æ£€æµ‹æµè§ˆå™¨è¯­è¨€å¹¶è®¾ç½®ä¸ºé»˜è®¤è¯­è¨€
2. æ”¯æŒå®æ—¶åˆ‡æ¢è¯­è¨€
3. æ‰€æœ‰é™æ€æ–‡æœ¬å’ŒåŠ¨æ€æç¤ºä¿¡æ¯éƒ½æ”¯æŒå¤šè¯­è¨€
4. ä¿ç•™äº†åŸæœ‰UIé£æ ¼å’ŒåŠŸèƒ½

ä½ ç°åœ¨å¯ä»¥è½»æ¾æ·»åŠ æ›´å¤šè¯­è¨€ï¼Œåªéœ€åœ¨ `translations.js` æ–‡ä»¶ä¸­æ·»åŠ æ–°çš„è¯­è¨€å¯¹è±¡å³å¯ã€‚

---

